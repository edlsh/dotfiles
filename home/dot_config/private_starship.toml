# Comprehensive Starship Configuration
# Schema for editor completions
"$schema" = 'https://starship.rs/config-schema.json'

# Performance: increase timeout for slow git repos
command_timeout = 1000

# Blank line between prompts for readability
add_newline = true

# Use Catppuccin Mocha palette
palette = 'catppuccin_mocha'

# Clean two-line prompt - git on right
format = """
$os\
$directory\
$fill\
$git_branch\
$git_status\
$git_metrics\
$line_break\
$character"""

# Right side: context info (only shows when relevant)
right_format = """
$docker_context\
$kubernetes\
$aws\
$nodejs\
$python\
$rust\
$cmd_duration\
$time"""

# ===== Core Modules =====

[os]
disabled = false
style = 'bold white'

[os.symbols]
Macos = " "
Linux = " "
Windows = "󰍲 "
Ubuntu = " "
Arch = " "
Debian = " "
Fedora = " "
Alpine = " "
Raspbian = " "

[shell]
disabled = true

[fill]
symbol = '─'
style = 'dimmed surface0'

[directory]
truncation_length = 3
truncate_to_repo = true
style = 'bold sapphire'
read_only = ' 󰌾'
read_only_style = 'red'
home_symbol = ' ~'

[directory.substitutions]
"Documents" = "󰈙 "
"Downloads" = " "
"Music" = "󰝚 "
"Pictures" = " "
"Videos" = "󰿎 "
"Projects" = " "
"Code" = " "
"Developer" = " "
".config" = " "
"Desktop" = "󰇄 "
"Library" = "󰂺 "

[character]
success_symbol = '[❯](bold green)'
error_symbol = '[❯](bold red)'
vimcmd_symbol = '[❮](bold green)'
vimcmd_replace_one_symbol = '[❮](bold mauve)'
vimcmd_replace_symbol = '[❮](bold mauve)'
vimcmd_visual_symbol = '[❮](bold yellow)'

# ===== Git =====

[git_branch]
symbol = ' '
style = 'bold mauve'
format = '[$symbol$branch(:$remote_branch)]($style) '
truncation_length = 30
truncation_symbol = '…'

[git_status]
format = '($all_status$ahead_behind )'
conflicted = '[󰞇 $count](red) '
ahead = '[󰜸 $count](green) '
behind = '[󰜯 $count](yellow) '
diverged = '[󰃻 ⇡$ahead_count ⇣$behind_count](yellow) '
untracked = '[󰋗 $count](blue) '
stashed = '[󰏗](cyan) '
modified = '[󰝶 $count](yellow) '
staged = '[󰐗 $count](green) '
renamed = '[󰑕 $count](cyan) '
deleted = '[󰍴 $count](red) '
up_to_date = ''

[git_commit]
disabled = false
commit_hash_length = 7
tag_symbol = ' 󰓹 '
only_detached = true
format = '[\($hash$tag\)]($style) '
style = 'green'

[git_state]
format = '[\($state( $progress_current of $progress_total)\)]($style) '
style = 'yellow'

[git_metrics]
disabled = false
added_style = 'green'
deleted_style = 'red'
format = '([+$added]($added_style) [-$deleted]($deleted_style) )'
only_nonzero_diffs = true

# ===== Language Runtimes =====

[nodejs]
symbol = ' '
format = '[$symbol$version]($style) '
style = 'green'
detect_files = ['package.json', '.node-version', '.nvmrc']
detect_folders = ['node_modules']

[python]
symbol = ' '
format = '[$symbol$version( \($virtualenv\))]($style) '
style = 'yellow'
detect_files = ['pyproject.toml', 'requirements.txt', '.python-version', 'Pipfile', 'setup.py', 'tox.ini']

[rust]
symbol = ' '
format = '[$symbol$version]($style) '
style = 'peach'
detect_files = ['Cargo.toml']

[golang]
symbol = ' '
format = '[$symbol$version]($style) '
style = 'cyan'
detect_files = ['go.mod', 'go.sum', 'go.work']

[ruby]
symbol = ' '
format = '[$symbol$version]($style) '
style = 'red'
detect_files = ['Gemfile', '.ruby-version', '.rvmrc']

[package]
symbol = '󰏗 '
format = '[$symbol$version]($style) '
style = 'dimmed peach'
display_private = false

# ===== Cloud & Infrastructure =====

[aws]
symbol = '󰸏 '
format = '[$symbol($profile)(\($region\))]($style) '
style = 'yellow'
expiration_symbol = '󰃰 '

[gcloud]
disabled = true

[azure]
symbol = '󰠅 '
format = '[$symbol($subscription)]($style) '
style = 'blue'

[docker_context]
symbol = '󰡨 '
format = '[$symbol$context]($style) '
style = 'blue'
only_with_files = true
detect_files = ['docker-compose.yml', 'docker-compose.yaml', 'Dockerfile', 'compose.yml', 'compose.yaml']

[kubernetes]
disabled = false
symbol = '󱃾 '
format = '[$symbol$context(\($namespace\))]($style) '
style = 'cyan'
detect_files = ['k8s', 'kubernetes', 'Chart.yaml', 'helmfile.yaml', 'kustomization.yaml']
detect_folders = ['charts', 'kustomize']

[terraform]
symbol = '󱁢 '
format = '[$symbol$workspace]($style) '
style = 'purple'
detect_files = ['*.tf', 'terraform.tfstate']

# ===== Context-Aware Modules =====

[hostname]
ssh_only = true
format = '[$ssh_symbol$hostname]($style):'
style = 'bold dimmed green'
ssh_symbol = '󰣀 '

[username]
show_always = false
format = '[$user]($style)@'
style_user = 'yellow'
style_root = 'bold red'

# ===== Status & Utility Modules =====

[cmd_duration]
min_time = 2000
format = '[$duration]($style) '
style = 'yellow'
show_milliseconds = false
show_notifications = false

[time]
disabled = false
format = '[$time]($style)'
time_format = '%H:%M'
style = 'dimmed text'

[battery]
full_symbol = '󰁹 '
charging_symbol = '󰂄 '
discharging_symbol = '󰂃 '
unknown_symbol = '󰂑 '
empty_symbol = '󰂎 '
format = '[$symbol$percentage]($style) '

[[battery.display]]
threshold = 15
style = 'bold red'

[[battery.display]]
threshold = 30
style = 'yellow'

[[battery.display]]
threshold = 100
style = 'dimmed green'

[jobs]
symbol = '󰒓 '
number_threshold = 1
symbol_threshold = 1
format = '[$symbol$number]($style) '
style = 'bold blue'

[status]
disabled = false
symbol = ' '
success_symbol = ''
not_executable_symbol = '󰂭 '
not_found_symbol = '󰍉 '
sigint_symbol = '󰟾 '
signal_symbol = '󱐋 '
format = '[$symbol$status]($style) '
style = 'red'
map_symbol = true

[sudo]
disabled = false
symbol = '󰯄 '
format = '[$symbol]($style)'
style = 'bold red'

[shlvl]
disabled = false
symbol = '󰜮 '
threshold = 2
format = '[$symbol$shlvl]($style) '
style = 'yellow'

[nix_shell]
symbol = ' '
format = '[$symbol$state(\($name\))]($style) '
style = 'blue'
heuristic = true

# ===== Custom Modules =====

[custom.git_email]
description = 'Current git user email'
command = 'git config user.email 2>/dev/null | cut -d@ -f1'
when = 'git rev-parse --git-dir 2>/dev/null'
format = '[$output]($style) '
style = 'dimmed'
shell = ['sh']

[custom.brew_updates]
description = 'Homebrew pending updates'
command = 'brew outdated 2>/dev/null | wc -l | tr -d " "'
when = '[ "$(brew outdated 2>/dev/null | wc -l | tr -d " ")" -gt 0 ]'
symbol = '󰏔 '
format = '[$symbol$output]($style) '
style = 'yellow'
shell = ['sh']
# Disabled by default - uncomment to enable (runs slow)
disabled = true

[custom.npm_yarn_pnpm]
description = 'Package manager indicator'
command = 'if [ -f yarn.lock ]; then echo "󰄛"; elif [ -f pnpm-lock.yaml ]; then echo "󰋁"; elif [ -f bun.lockb ]; then echo "󰛡"; else echo "󰎙"; fi'
when = '[ -f package.json ]'
format = '[$output]($style) '
style = 'red'
shell = ['sh']

# ===== Catppuccin Mocha Palette =====

[palettes.catppuccin_mocha]
rosewater = '#f5e0dc'
flamingo = '#f2cdcd'
pink = '#f5c2e7'
mauve = '#cba6f7'
red = '#f38ba8'
maroon = '#eba0ac'
peach = '#fab387'
yellow = '#f9e2af'
green = '#a6e3a1'
teal = '#94e2d5'
sky = '#89dceb'
sapphire = '#74c7ec'
blue = '#89b4fa'
lavender = '#b4befe'
text = '#cdd6f4'
subtext1 = '#bac2de'
subtext0 = '#a6adc8'
overlay2 = '#9399b2'
overlay1 = '#7f849c'
overlay0 = '#6c7086'
surface2 = '#585b70'
surface1 = '#45475a'
surface0 = '#313244'
base = '#1e1e2e'
mantle = '#181825'
crust = '#11111b'
